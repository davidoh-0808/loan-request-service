<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta name="description" content="description" />
	<meta name="keywords" content="keywords" />
	<meta name="author" content="author" />
	<title>현대차미소금융재단</title>
	<link type="text/css" rel="stylesheet" href="../common/css/jquery-ui.min.css" />
	<link type="text/css" rel="stylesheet" href="../common/css/admin.css" />
	<script type="text/javascript" src="../js/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../js/common.js"></script>
	<script type="text/javascript" src="../js/chart.min.js"></script>
	<script type="text/javascript" src="../js/chartjs-plugin-labels.js"></script>
</head>

<body>
	<!--wrap -->
	<div class="admin_wrap">
		<!-- 관리자 상단 -->
		<div class="admin_top">
			<div class="top_area">
				<!-- 로고 -->
				<div class="logo">
					<h1><span><img src="../img/h_logo.gif" alt="서민금융진흥원 사업수행기관 현대차미소금융재단"></span></h1>
				</div>
				<!-- // 로고 -->
				<!-- 사용자 -->
				<div class="user user_wrap">
					<div class="user_login">
						<div class="user_id">
							<p>홍길동(abcd1234)</p>
						</div>
						<div class="user_info">
							<p>지점(상담원)</p>
							<p>인천지점</p>
						</div>
					</div>
					<button type="button" class="r_box">Log-Out</button>
				</div>
				<!-- //사용자 -->
			</div>
		</div>
		<!-- // 관리자 상단 -->
		<!-- 관리자 히단 -->
		<div class="admin_bottom">
			<!-- lnb_지점/심사팀 -->
			<div class="lnb_wrap">
				<div class="lnb">
					<ul class="dep1">
						<li>
							<p><a href="#none" class="tit">상담신청내역</a></p>
							<ul class="dep2">
								<li class="on"><a href="#none">- 신청내역조회 / 수정</a></li>
							</ul>
						</li>
						<li>
							<p><a href="#none" class="tit">마이페이지</a></p>
							<ul class="dep2">
								<li><a href="#none">- 프로필 설정</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
			<!-- // lnb -->
			<!--content-->
			<div class="content spot">
				<h2 class="con_tit">대시보드</h2>
				<div class="df board">
					<section class="dash_area first">
						<div class="top">
							<h3 class="s_tit">나의 상담</h3>
							<div class="event menu01">
								<span class="date">2022. 08. 31</span>
								<ul>
									<li class="on">일별</li>
									<li>월별</li>
									<li>연별</li>
								</ul>
							</div>
						</div>
						<div class="board_wrap">
							<ul class="board_list">
								<li>
									<div class="count">
										<em>전체</em>
										<p class="c_blue">35<span>건</span></p>
									</div>
									<div class="line_chart">
										<p>진행 중+완료+취소</p>
										<div id="progressbar" class="data01"></div>
									</div>
								</li>
								<li>
									<div class="count">
										<em>접수</em>
										<p>20<span>건</span></p>
									</div>
									<div class="line_chart">
										<p class="per">57<span>%</span></p>
										<div id="progressbar" class="data02"></div>
									</div>
								</li>
								<li>
									<div class="count">
										<em>진행 중</em>
										<p>10<span>건</span></p>
									</div>
									<div class="line_chart">
										<p class="per">28<span>%</span></p>
										<div id="progressbar" class="data03"></div>
									</div>
								</li>
								<li>
									<div class="count">
										<em>완료</em>
										<p>5<span>건</span></p>
									</div>
									<div class="line_chart">
										<p class="per">15<span>%</span></p>
										<div id="progressbar" class="data04"></div>
									</div>
								</li>
								<li>
									<div class="count">
										<em>취소</em>
										<p>5<span>건</span></p>
									</div>
									<div class="line_chart">
										<p class="per">15<span>%</span></p>
										<div id="progressbar" class="data05"></div>
									</div>
								</li>
							</ul>
						</div>
					</section>
					<section class="dash_area ml20">
						<div class="top">
							<h3 class="s_tit">지점 상담 현황</h3>
							<div class="event menu02">
								<span class="date">2022. 08. 31</span>
								<ul>
									<li class="on">일별</li>
									<li>월별</li>
									<li>연별</li>
								</ul>
							</div>
						</div>
						<div class="chart">
							<div class="chart_wrap">
								<div class="labels">
									<p>접수</p>
									<p>진행중</p>
									<p>완료</p>
									<p>취소</p>
								</div>
								<canvas id="userStatus"  class="dash_chart"  height="150px" width="150px"></canvas>
							</div>
							<div class="chart_grid">
								<table class="chart_table">
									<caption>전체 상담 현황</caption>
									<colgroup>
										<col style="width: 110px;">
										<col style="width: 105px;">
										<col style="width: 105px;">
									</colgroup>
									<tbody>
										<tr>
											<th scope="row">접수</th>
											<td><p>120<span>건</span></p></td>
											<td><p>50<span>%</span></p></td>
										</tr>
										<tr>
											<th scope="row">진행 중</th>
											<td><p>120<span>건</span></p></td>
											<td><p>50<span>%</span></p></td>
										</tr>
										<tr>
											<th scope="row">완료</th>
											<td><p>120<span>건</span></p></td>
											<td><p>50<span>%</span></p></td>
										</tr>
										<tr>
											<th scope="row">취소</th>
											<td><p>120<span>건</span></p></td>
											<td><p>50<span>%</span></p></td>
										</tr>
									</tbody>
									<tfoot>
										<tr>
											<th scope="row">전체</th>
											<td><p>240<span>건</span></p></td>
											<td><p>100<span>%</span></p></td>
										</tr>
									</tfoot>
								</table>
							</div>
						</div>
					</section>
				</div>
			</div>
			<!--//content-->

		</div>
		<!-- //관리자 하단 -->

	</div>
	<!-- //Wrap-->

	<script>

		$(function(){
			

		/* =======================================================
			나의 상담
		========================================================= */

			$('.data01').progressbar({
				value:0
			})

			$('.data02').progressbar({
				value:0,
			})

			$('.data03').progressbar({
				value:0,
			})
			$('.data04').progressbar({
				value:0,
			})
			$('.data05').progressbar({
				value:0,
			})

			setTimeout( () => {
				$('.data01').progressbar({
					value:100
				})

				$('.data02').progressbar({
					value:57,
				})

				$('.data03').progressbar({
					value:28,
				})

				$('.data04').progressbar({
					value:15,
				})

				$('.data05').progressbar({
					value:30,
				})
			}, 500)

		/* =======================================================
		 	상담내역 현황 일별/월별/연별 버튼
		========================================================= */


			$('.event.menu01 ul li').on('click', function(e){
				e.preventDefault();

				let isOn = $(this).hasClass('on');
				if(isOn) return;

				$('.event.menu01 ul li').removeClass('on');
				$(this).addClass('on');
				
			})

			$('.event.menu02 ul li').on('click', function(e){
				e.preventDefault();

				let isOn = $(this).hasClass('on');
				if(isOn) return;

				$('.event.menu02 ul li').removeClass('on');
				$(this).addClass('on');
				
			})
			
	/* ==========================================================================
		지점 상담 현황
	========================================================================== */

			const userCtx = document.querySelector('#userStatus').getContext('2d');

			let userData = {
				labels: ['접수', '진행 중', '완료', '대기', '부재', '취소'],
				datasets: [{
					label: '전체 상담 현황',
					data: [200, 150, 50, 200, 50, 50],
					backgroundColor: [
						'#64DECF', //접수
						'#1A528F', //진행 중(대기)
						'#D9CBE2', //진행 중
						'#50B9F3', //부재/보류
						'#EE4B6B', // 완료
						'#FDECB2', //취소
					],
					borderWidth: 1,
					hoverOffset: 4,
				}]
			}

			let userOption = {
				responsive: false,
				legend: {
					display: false,
        		},
				interaction: {
					intersect: false,
					mode: 'index',
       			 },
				tooltips: {
					callbacks: {
						title: function (tooltipItem, data) {
							return data['labels'][tooltipItem[0]['index']];
						},
						label: function (tooltipItem, data) {
							return data['datasets'][0]['data'][tooltipItem['index']] + '%';
						},
					},
					backgroundColor: '#000',
					titleFontSize: 12,
					titleFontColor: '#9B9FB5',
					bodyFontColor: '#fff',
					bodyFontSize: 14,
					displayColors: false,
				},
				plugins: {
					datalabels: {
						font: {
							size: 0,
						}
					},
				}
			
			}

			var userChart = new Chart(userCtx, {
				type: 'doughnut',
				data: userData,
				options: userOption
			});

		})

	/* ==========================================================================
        Chart PluginService ( Chart Style )
    ========================================================================== */
    Chart.pluginService.register({
        beforeDraw: function (chart) {
            let count = chart.chart.data.datasets[0].data
            let width = chart.chart.width,
                height = chart.chart.height,
				ctx = chart.chart.ctx;
            ctx.restore();

            if (chart.canvas.id === 'userStatus') {
                const _fill = ctx.fill;
                chart.data.datasets.forEach(set => {
                    ctx.fill = function () {
                        ctx.save();
                        ctx.shadowColor = "rgba(0, 0, 0, 0.2)";
                        ctx.shadowBlur = 16;
                        ctx.shadowOffsetX = 0;
                        ctx.shadowOffsetY = 2;
                        _fill.apply(this);
                        ctx.restore();
                    };
                })
            } 
        },
    });
		
		

		 

	</script>
</body>

</html>